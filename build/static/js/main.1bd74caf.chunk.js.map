{"version":3,"sources":["components/Person.js","components/PersonForm.js","components/Filter.js","components/Notification.js","components/Error.js","services/persons.js","App.js","index.js"],"names":["Person","persons","filterName","deletePerson","filteredPerson","filter","person","name","toLowerCase","indexOf","map","number","onClick","id","PersonForm","addName","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","value","onChange","type","Filter","handleFilterChange","Notification","message","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","marginLeft","width","Error","baseUrl","getAll","a","request","axios","get","response","data","create","newObject","post","del","delete","console","log","update","put","changeSuccessStatus","personObject","operation","setSuccessMessage","setTimeout","App","useState","setPersons","setNewName","setNewNumber","setFilterName","successMessage","errorMessage","setErrorMessage","useEffect","personService","then","initialPerson","event","target","preventDefault","personFound","some","window","confirm","find","n","returnedPerson","catch","error","alert","concat","item","changeErrorStatus","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1bd74caf.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Person = ({ persons, filterName, deletePerson }) => {\r\n  var filteredPerson = persons\r\n  // Filter names by finding the given filter from names.\r\n  // It's index must be non-negative so it is included in word.\r\n  // Filter assumes that it exists somewhere, not only in start\r\n  if (filterName) {\r\n    filteredPerson = persons.filter((person) =>\r\n        person.name.toLowerCase().indexOf(filterName.toLowerCase()) >= 0\r\n    )\r\n  }\r\n\r\n  return filteredPerson.map((person) => (\r\n    <p key={person.name}>\r\n      {\" \"}\r\n      {person.name} {person.number}\r\n      {\" \"}\r\n      <button onClick={() => deletePerson(person.id)}>delete</button>\r\n    </p>\r\n  ))\r\n}\r\n\r\nexport default Person;","import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  addName,\r\n  newName,\r\n  handleNameChange,\r\n  newNumber,\r\n  handleNumberChange,\r\n}) => {\r\n  return (\r\n    <form onSubmit={addName}>\r\n      <div>\r\n        name: <input value={newName} onChange={handleNameChange} />\r\n      </div>\r\n      <div>\r\n        number: <input value={newNumber} onChange={handleNumberChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\"\r\n\r\nconst Filter = ({filterName, handleFilterChange}) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t  filter shown with <input\r\n\t\t\tvalue={filterName}\r\n\t\t\tonChange = {handleFilterChange}\r\n\t\t  />\r\n\t  </div>\r\n\t)\r\n}\r\n\r\nexport default Filter","const Notification = ({ message }) => {\r\n  const successStyle = { \r\n      color: \"green\",\r\n      background: \"lightgrey\",\r\n      fontSize: 20,\r\n      borderStyle: \"solid\",\r\n      borderRadius: 5,\r\n      padding: 10,\r\n      marginBottom: 10,\r\n      marginLeft: 5,\r\n      width: 300\r\n  }\r\n\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div style={successStyle}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification","const Error = ({ message }) => {\r\n  const errorStyle = { \r\n    color: \"red\",\r\n    background: \"lightgrey\",\r\n    fontSize: 20,\r\n    borderStyle: \"solid\",\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10,\r\n    marginLeft: 5,\r\n    width: 400\r\n}\r\n\r\n  if (message === null) {\r\n    return null\r\n  } \r\n\r\n  return (\r\n    <div style={errorStyle}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Error\r\n","import axios from \"axios\"\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = async () => {\r\n  const request = axios.get(baseUrl)\r\n  const response = await request;\r\n  return response.data;\r\n};\r\n\r\nconst create = async (newObject) => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  const response = await request;\r\n  return response.data;\r\n};\r\n\r\nconst del = async (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  console.log(\"request for deleting\", request)\r\n  const response = await request;\r\n  return response.data;\r\n};\r\n\r\nconst update = async (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  const response = await request;\r\n  return response.data;\r\n}\r\n\r\nexport default { getAll, create, del, update }\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Person from \"./components/Person\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport Filter from \"./components/Filter\";\r\nimport Notification from \"./components/Notification\";\r\nimport Error from \"./components/Error\";\r\nimport personService from \"./services/persons\";\r\n\r\n/*\r\nchangeSuccessStatus in brief handles the status shown of add, remove or update\r\n*/\r\nconst changeSuccessStatus = (personObject, operation, setSuccessMessage) => {\r\n  if (operation === \"add\" || operation === \"remove\") {\r\n    setSuccessMessage(operation === \"add\" \r\n      ? `Added ${personObject.name}` \r\n      : `Removed ${personObject.name}`)\r\n    setTimeout(() => {\r\n      setSuccessMessage(null)\r\n    }, 2000)\r\n  }\r\n  else if (operation === \"update\"){\r\n    setSuccessMessage(`Changed ${personObject.name}'s number to ${personObject.number}`)\r\n    setTimeout(() => {\r\n      setSuccessMessage(null)\r\n    }, 2000)\r\n  }\r\n};\r\n\r\n/*\r\nchangeErrorStatus in brief handles the status shown of error situation\r\n*/\r\nconst changeErrorStatus = (personObject, setErrorMessage) => {\r\n  setErrorMessage(`Information of ${personObject.name} has already been removed from the server`)\r\n  setTimeout(() => {\r\n    setErrorMessage(null)\r\n  }, 2000)\r\n}\r\n\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [filterName, setFilterName] = useState(\"\");\r\n  const [successMessage, setSuccessMessage] = useState(null)\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n\r\n  useEffect(() => {\r\n    console.log(\"effect\");\r\n    personService.getAll().then((initialPerson) => {\r\n      setPersons(initialPerson);\r\n    });\r\n  }, []);\r\n\r\n  const addName = (event) => {\r\n    event.preventDefault();\r\n\r\n    const personFound = persons.some((person) => \r\n      person.name.toLowerCase() === newName.toLowerCase()\r\n    );\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n    };\r\n \r\n    if (personFound) {\r\n      // Replace the persons phonenumber if user accepts confirm.\r\n      if (window.confirm(`${personFound.name} is already found, replace the old number\r\n       with a new one?`)){\r\n        const person = persons.find(n => n.name === newName)\r\n        const id = person.id;\r\n        personService\r\n          .update(id, personObject)\r\n          .then(returnedPerson => {\r\n            setPersons(persons.map(person => \r\n              person.id !== id\r\n               ? person \r\n               : returnedPerson))\r\n            changeSuccessStatus(personObject, \"update\", setSuccessMessage)\r\n          })\r\n          .catch(error => {\r\n            alert(\r\n              `the person '${person.name}' was already deleted from server`\r\n            )\r\n            setPersons(persons.filter(n => n.id !== id))     \r\n          });\r\n      }\r\n    } \r\n    // Add new person to phonebook\r\n    else {\r\n      personService\r\n        .create(personObject)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.concat(returnedPerson))\r\n          changeSuccessStatus(personObject, \"add\", setSuccessMessage)\r\n      })\r\n    }\r\n    setNewName(\"\")\r\n    setNewNumber(\"\")\r\n  };\r\n\r\n  const deletePerson = id => {\r\n    const person = persons.find(n => n.id === id)\r\n    if (window.confirm(`Do you really want to remove ${person.name} from the phonebook?`)) {\r\n        personService\r\n          .del(id)\r\n          .then(returnedPerson => {\r\n            setPersons(persons.filter((item) => item.id !== id));\r\n            changeSuccessStatus(person, \"remove\", setSuccessMessage)\r\n          })\r\n          .catch((error) => {\r\n            changeErrorStatus(person, setErrorMessage)\r\n            setPersons(persons.filter((item) => item.id !== id));\r\n        })\r\n    }   \r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  };\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  };\r\n  const handleFilterChange = (event) => {\r\n    setFilterName(event.target.value)\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n\r\n      <Error message={errorMessage} />\r\n      <Notification message={successMessage} />\r\n\r\n      <Filter filterName={filterName} handleFilterChange={handleFilterChange} />\r\n\r\n      <h3>Add a new</h3>\r\n      <PersonForm\r\n        addName={addName}\r\n        newName={newName}\r\n        handleNameChange={handleNameChange}\r\n        newNumber={newNumber}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n\r\n      <h2>Numbers</h2>\r\n      <Person\r\n        persons={persons}\r\n        filterName={filterName}\r\n        deletePerson={deletePerson}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport App from \"./App.js\"\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"react-root\"))\nif (module.hot) {\n  module.hot.accept()\n}\n"],"sourceRoot":""}